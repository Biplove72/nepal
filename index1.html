<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8" />
<title>Three.js Click Game</title>

<style>
body {
  margin: 0;
  overflow: hidden;
  background: black;
  font-family: Arial, sans-serif;
}

#overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

/* MESSAGE STYLE */
.msg {
  position: absolute;
  color: #fff;
  font-size: 42px;
  font-weight: bold;
  background: rgba(0,0,0,0.6);
  padding: 10px 16px;
  border-radius: 10px;
  opacity: 0;
  transition: opacity 0.5s ease;
  white-space: pre-line;
  text-shadow:
    0 0 5px #ffd700,
    0 0 10px #ffd700,
    0 0 20px #ffae00,
    0 0 40px #ff8800;
}

/* LEADERBOARD */
#leaderboard {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 220px;
  background: rgba(0,0,0,0.7);
  color: #fff;
  padding: 10px;
  border-radius: 10px;
  pointer-events: none;
}

#leaderboard h3 {
  margin: 0 0 6px;
  text-align: center;
  color: gold;
  font-size: 16px;
}

#leaderboard ol {
  margin: 0;
  padding-left: 18px;
  font-size: 14px;
}

#score {
  position: absolute;
  bottom: 10px;
  left: 10px;
  color: #fff;
  font-size: 18px;
  background: rgba(0,0,0,0.6);
  padding: 6px 10px;
  border-radius: 8px;
}
</style>
</head>

<body>

<div id="overlay"></div>
<div id="leaderboard">
  <h3>üèÜ Top 10 Players</h3>
  <ol id="list"></ol>
</div>
<div id="score">Score: 0</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

<script>
/* =====================
   PLAYER SETUP
===================== */
let playerName = prompt("Enter your name") || "Guest";
let score = 0;

/* =====================
   THREE SETUP
===================== */
const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(
  60,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
camera.position.z = 5;

const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

/* =====================
   IMAGE
===================== */
const loader = new THREE.TextureLoader();
const imagePlane = new THREE.Mesh(
  new THREE.PlaneGeometry(3, 3),
  new THREE.MeshBasicMaterial({
    map: loader.load("images.jpg"),
    transparent: true
  })
);
scene.add(imagePlane);

/* =====================
   RAYCASTER
===================== */
const raycaster = new THREE.Raycaster();
const mouse = new THREE.Vector2();

/* =====================
   MESSAGES
===================== */
const messages = [
  "‡§µ‡§ø‡§ï‡§æ‡§∏",
  "‡§∏‡§Æ‡•É‡§¶‡•ç‡§ß‡§ø",
  "‡§∏‡•Å‡§∂‡§æ‡§∏‡§®",
  "‡§™‡§ø‡§§‡§æ‡§Æ‡•ç‡§¨‡§∞ ‡§≠‡•Å‡§∏‡§æ‡§≤‡§≤‡§æ‡§à\n‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ö‡§ø‡§®‡•ç‡§π‡§Æ‡§æ\n‡§Æ‡§§‡§¶‡§æ‡§® ‡§ó‡§∞‡•Ä ‡§ú‡§ø‡§§‡§æ‡§î‡§Å"
];
let clickCount = 0;

const overlay = document.getElementById("overlay");
const scoreDiv = document.getElementById("score");

/* =====================
   CLICK EVENT
===================== */
window.addEventListener("click", (event) => {
  mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
  mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

  raycaster.setFromCamera(mouse, camera);
  const hit = raycaster.intersectObject(imagePlane);

  if (hit.length) {
    score++;
    scoreDiv.innerText = "Score: " + score;
    showMessages();
    saveScore();
    renderLeaderboard();
  }
});

/* =====================
   SHOW MESSAGE
===================== */
function showMessages() {
  const text = messages[clickCount];
  const positions = [
    { top: "22%", left: "50%" },
    { top: "50%", left: "18%" },
    { top: "50%", left: "82%" },
    { top: "78%", left: "50%" }
  ];

  positions.forEach(p => {
    const el = document.createElement("div");
    el.className = "msg";
    el.innerText = text;
    el.style.top = p.top;
    el.style.left = p.left;
    el.style.transform = "translate(-50%, -50%)";
    overlay.appendChild(el);

    requestAnimationFrame(() => el.style.opacity = 1);

    setTimeout(() => {
      el.style.opacity = 0;
      setTimeout(() => el.remove(), 500);
    }, 1500);
  });

  clickCount = (clickCount + 1) % messages.length;
}

/* =====================
   SCORE STORAGE
===================== */
function saveScore() {
  let data = JSON.parse(localStorage.getItem("gameScores")) || [];

  const existing = data.find(p => p.name === playerName);
  if (existing) {
    existing.score = Math.max(existing.score, score);
  } else {
    data.push({ name: playerName, score });
  }

  data.sort((a, b) => b.score - a.score);
  data = data.slice(0, 10);

  localStorage.setItem("gameScores", JSON.stringify(data));
}

/* =====================
   LEADERBOARD
===================== */
function renderLeaderboard() {
  const list = document.getElementById("list");
  list.innerHTML = "";

  const data = JSON.parse(localStorage.getItem("gameScores")) || [];
  data.forEach(p => {
    const li = document.createElement("li");
    li.innerText = `${p.name} ‚Äî ${p.score}`;
    list.appendChild(li);
  });
}
renderLeaderboard();

/* =====================
   ANIMATE
===================== */
function animate() {
  requestAnimationFrame(animate);
  renderer.render(scene, camera);
}
animate();

/* =====================
   RESIZE
===================== */
window.addEventListener("resize", () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
